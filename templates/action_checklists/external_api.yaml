# å¤–éƒ¨é€£æºç³»å‡¦ç†ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
version: "1.0.0"
action_type: "EXTERNAL_API"
base_severity: "HIGH"

checklist:
  - id: "ext_001"
    title: "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š"
    question: "å¤–éƒ¨APIå‘¼ã³å‡ºã—ã¯ä½•ç§’ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¨ã™ã‚‹ã‹ï¼Ÿ"
    criticality: "MUST_DEFINE"  # ğŸ”´ æœªå®šç¾©ä¸å¯
    default_assumption: null
    why_critical: "ç„¡é™å¾…æ©Ÿã™ã‚‹ã¨ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒåœæ­¢ã™ã‚‹ã€‚å¿…ãšè¨­å®šãŒå¿…è¦"
    change_cost_if_later: "5-10æ™‚é–“ï¼ˆè¨­å®šå€¤ã®èª¿æ•´ï¼‰"
    affects:
      - data_model: false
      - external_system: true
      - security: false
    detection_phase: "implementation"
    options:
      - value: "5"
        label: "5ç§’ï¼ˆçŸ­ã‚ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç³»ï¼‰"
      - value: "30"
        label: "30ç§’ï¼ˆæ¨™æº–ï¼‰"
      - value: "60"
        label: "60ç§’ï¼ˆé‡ã„å‡¦ç†ï¼‰"
    
  - id: "ext_002"
    title: "ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥"
    question: "å¤±æ•—æ™‚ã«ä½•å›ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã‹ï¼Ÿãƒªãƒˆãƒ©ã‚¤é–“éš”ã¯ï¼Ÿ"
    criticality: "SHOULD_DEFINE"  # ğŸŸ¡ å®šç¾©æ¨å¥¨
    default_assumption: "3å›ã€æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼ˆ1ç§’ã€2ç§’ã€4ç§’ï¼‰"
    why_critical: "ãƒªãƒˆãƒ©ã‚¤ãªã—ã ã¨ä¸€æ™‚çš„ãªéšœå®³ã§å¤±æ•—ã€‚ãƒªãƒˆãƒ©ã‚¤éå¤šã¯è² è·å¢—"
    change_cost_if_later: "5-10æ™‚é–“"
    affects:
      - data_model: false
      - external_system: true
      - security: false
    detection_phase: "implementation"
    
  - id: "ext_003"
    title: "ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†"
    question: "APIéšœå®³æ™‚ã®ä»£æ›¿æŒ™å‹•ã¯ï¼Ÿ"
    criticality: "MUST_DEFINE"  # ğŸ”´ æœªå®šç¾©ä¸å¯
    default_assumption: null
    why_critical: "å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¯å¿…ãšéšœå®³ãŒèµ·ãã‚‹ã€‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ã¯è‡´å‘½çš„"
    change_cost_if_later: "20-40æ™‚é–“ï¼ˆä»£æ›¿å‡¦ç†ã®å®Ÿè£…ï¼‰"
    affects:
      - data_model: false
      - external_system: true
      - security: false
    detection_phase: "design"
    options:
      - value: "cache"
        label: "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”ã™"
      - value: "default"
        label: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ã†"
      - value: "error_screen"
        label: "ã‚¨ãƒ©ãƒ¼ç”»é¢ã‚’è¡¨ç¤º"
      - value: "queue"
        label: "ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã¦å¾Œã§å†å®Ÿè¡Œ"
    
  - id: "ext_004"
    title: "èªè¨¼æƒ…å ±ã®ç®¡ç†"
    question: "APIã‚­ãƒ¼/ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã©ã“ã«ä¿å­˜ã™ã‚‹ã‹ï¼Ÿ"
    criticality: "MUST_DEFINE"  # ğŸ”´ æœªå®šç¾©ä¸å¯
    default_assumption: null
    why_critical: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã€‚æ¼æ´©ã™ã‚‹ã¨å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹"
    change_cost_if_later: "30-50æ™‚é–“ï¼ˆèªè¨¼æ–¹å¼ã®å¤‰æ›´ï¼‰"
    affects:
      - data_model: false
      - external_system: true
      - security: true
    detection_phase: "design"
    options:
      - value: "env"
        label: "ç’°å¢ƒå¤‰æ•°"
        pros: ["ã‚·ãƒ³ãƒ—ãƒ«", "ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å¤‰æ›´å¯èƒ½"]
        cons: ["ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ã«ãã„"]
      - value: "secrets_manager"
        label: "ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆAWS Secrets Managerç­‰ï¼‰"
        pros: ["å®‰å…¨", "ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å®¹æ˜“"]
        cons: ["è¤‡é›‘", "ã‚³ã‚¹ãƒˆå¢—"]
    
  - id: "ext_005"
    title: "ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"
    question: "å¤–éƒ¨APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¤œè¨¼ã™ã‚‹ã‹ï¼Ÿ"
    criticality: "SHOULD_DEFINE"  # ğŸŸ¡ å®šç¾©æ¨å¥¨
    default_assumption: "æ¤œè¨¼ã™ã‚‹"
    why_critical: "ä¸æ­£ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§"
    change_cost_if_later: "10-20æ™‚é–“"
    affects:
      - data_model: false
      - external_system: true
      - security: false
    detection_phase: "implementation"
    
  - id: "ext_006"
    title: "ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ"
    question: "å¤–éƒ¨APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«ã©ã†å¯¾å¿œã™ã‚‹ã‹ï¼Ÿ"
    criticality: "SHOULD_CONFIRM"  # ğŸŸ¡ ç¢ºèªæ¨å¥¨
    default_assumption: "ã‚¨ãƒ©ãƒ¼æ™‚ã«å¾…æ©Ÿ"
    why_critical: "ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¶…éã§APIå‘¼ã³å‡ºã—å¤±æ•—"
    change_cost_if_later: "20-30æ™‚é–“"
    affects:
      - data_model: false
      - external_system: true
      - security: false
    detection_phase: "implementation"

recommended_order:
  - ext_004  # èªè¨¼æƒ…å ±ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å„ªå…ˆï¼‰
  - ext_003  # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  - ext_001  # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  - ext_002  # ãƒªãƒˆãƒ©ã‚¤
  - ext_005  # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - ext_006  # ãƒ¬ãƒ¼ãƒˆåˆ¶é™

risk_patterns:
  - name: "å¤–éƒ¨APIéšœå®³ã®é€£é–"
    description: "å¤–éƒ¨APIéšœå®³æ™‚ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ã§ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒåœæ­¢"
    probability: "HIGH"
    impact: "CRITICAL"
    detection_phase: "production"



